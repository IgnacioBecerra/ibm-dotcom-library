//
// Copyright IBM Corp. 2020, 2021
//
// This source code is licensed under the Apache-2.0 license found in the
// LICENSE file in the root directory of this source tree.
//

@import 'carbon-components/scss/components/ui-shell/header';
@import 'carbon-components/scss/components/ui-shell/side-nav';
@import '@carbon/ibmdotcom-styles/scss/globals/vars';
@import '@carbon/ibmdotcom-styles/scss/components/masthead/masthead';
@import '@carbon/ibmdotcom-styles/scss/components/masthead/masthead-search';
@import '@carbon/ibmdotcom-styles/scss/components/masthead/masthead-megamenu';
@import '../../globals/scss/box-sizing';

:host(#{$dds-prefix}-search-with-typeahead) {
  position: relative;
  outline: none;
  height: $carbon--spacing-09;
  margin-left: rem(48px);

  .#{$dds-prefix}-ce--masthead__search__list {
    height: 0;
    overflow: hidden;
  }

  &[open] .#{$dds-prefix}-ce--masthead__search__list {
    height: auto;
  }

  &[active] {
    z-index: 999;
    width: 100%;
    margin-left: 0;

    @include carbon--breakpoint-down(md) {
      width: 100vw;
      right: 0;
    }

    button.#{$prefix}--header__search--close.#{$prefix}--header__action[aria-label='Close'] {
      display: inline-flex;
    }

    .#{$prefix}--header__search--actions {
      z-index: 10001;
    }

    .react-autosuggest__container {
      &::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 0;
        display: block;
        border-bottom: 2px solid $interactive-01;
        width: 100%;
        height: 2px;
        z-index: 10002;
      }
    }

    .#{$prefix}--header__search--input {
      display: flex;
      flex: 1;
      padding: 0 $carbon--spacing-05;
      outline: 2px solid transparent;
      outline-offset: -2px;
      background-color: $ui-01;
      height: carbon--mini-units(6);
      z-index: 10000;

      &::placeholder {
        left: 0;
        opacity: 1;
        transition-duration: 112ms;
        transition-delay: 200ms;
      }
    }

    .#{$prefix}--header__search--close {
      width: $carbon--spacing-09;
      display: inline-flex;
    }

    .#{$prefix}--header__search--close,
    .#{$prefix}--header__search--search {
      border: 2px solid transparent;

      &:focus,
      &:active {
        border: 2px solid $focus;
      }
    }

    .#{$prefix}--header__action {
      background-color: $ui-01;
      transition-property: width;
      transition-delay: 380ms;
      transition-duration: 112ms;
    }
  }
}

:host(#{$dds-prefix}-search-with-typeahead-item) {
  @extend .react-autosuggest__suggestion;

  font-size: $carbon--spacing-05;
}
